<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…Ù†ØµØ© hiderking Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© v3.0</title>
    <style>
        /* --- 1. CSS: Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¨ØµØ±ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„ --- */
        :root {
            --primary: #3498db;
            --secondary: #2ecc71;
            --danger: #e74c3c;
            --dark: #2c3e50;
            --light: #ecf0f1;
            --bg: #f4f7f6;
            --card: #ffffff;
            --text: #1c1e21;
            --border: #dcdde1;
            --nav-h: 75px;
        }

        [data-theme="dark"] {
            --bg: #121212;
            --card: #1e1e1e;
            --text: #f5f6fa;
            --border: #353b48;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            direction: rtl;
            overflow-x: hidden;
            transition: background 0.3s;
        }

        /* ØªØ®Ø·ÙŠØ· Ø§Ù„ØµÙØ­Ø§Øª */
        .page {
            display: none;
            padding: 20px;
            padding-bottom: calc(var(--nav-h) + 30px);
            max-width: 1000px;
            margin: 0 auto;
            min-height: 100vh;
            animation: slideUp 0.3s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª ÙˆØ§Ù„Ø¹Ù†Ø§ØµØ± */
        .card {
            background: var(--card);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border: 1px solid var(--border);
        }

        h2 { margin-bottom: 20px; border-right: 5px solid var(--primary); padding-right: 15px; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ - Ø¥ØµÙ„Ø§Ø­ Ø´Ø§Ù…Ù„ */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            height: var(--nav-h);
            background: var(--card);
            display: flex;
            justify-content: space-around;
            align-items: center;
            box-shadow: 0 -5px 25px rgba(0,0,0,0.1);
            z-index: 9999;
        }

        .nav-item {
            cursor: pointer;
            text-align: center;
            flex: 1;
            color: #a0a0a0;
            font-size: 11px;
            transition: 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
        }

        .nav-item i { font-size: 20px; margin-bottom: 4px; }

        .nav-item.active {
            color: var(--primary);
            font-weight: bold;
        }

        .plus-btn-container {
            position: relative;
            top: -25px;
        }

        .plus-btn {
            width: 60px;
            height: 60px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 35px;
            border: 6px solid var(--bg);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        /* Ø§Ù„Ù…Ø­Ø±Ø± ÙˆØ§Ù„Ù„ÙˆØ­Ø© */
        .editor-container {
            position: relative;
            width: 100%;
            background: white;
            border: 2px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            touch-action: none;
        }

        canvas {
            display: block;
            background: #fff;
        }

        /* Ø·Ø¨Ù‚Ø© Ø§Ù„Ù†Øµ Ø§Ù„Ù…ØªØ­Ø±Ùƒ */
        #text-overlay {
            position: absolute;
            top: 50px;
            left: 50px;
            padding: 10px;
            border: 2px dashed var(--primary);
            background: rgba(255,255,255,0.8);
            cursor: move;
            display: none;
            z-index: 100;
        }

        #text-overlay input {
            background: transparent;
            border: none;
            outline: none;
            font-size: 20px;
            font-weight: bold;
            color: #000;
            width: 200px;
            user-select: text;
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª */
        .toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 15px;
            background: var(--card);
            border-radius: 12px;
            margin-bottom: 10px;
            border: 1px solid var(--border);
        }

        .tool {
            padding: 10px 15px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: var(--bg);
            cursor: pointer;
            font-weight: 500;
        }

        .tool.active {
            background: var(--primary);
            color: white;
        }

        /* ØªØ­ÙƒÙ… Ø§Ù„ØµÙØ­Ø§Øª */
        .page-ctrl {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 15px;
        }

        .page-btn {
            background: var(--dark);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            cursor: pointer;
        }

        /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
        .cat-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .cat-card {
            background: var(--primary);
            color: white;
            padding: 30px;
            text-align: center;
            border-radius: 15px;
            font-weight: bold;
        }

        /* Ø§Ù„Ø­Ø³Ø§Ø¨ */
        .profile-section {
            text-align: center;
        }

        .avatar-lg {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 4px solid var(--primary);
            margin-bottom: 15px;
            cursor: pointer;
        }

        input[type="text"], input[type="file"], select {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: var(--card);
            color: var(--text);
        }

        .btn-action {
            width: 100%;
            padding: 15px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
        }

        .hidden { display: none !important; }

        /* Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù„Ù„Ø§Ø¨ØªÙˆØ¨ Dell */
        @media (min-width: 1024px) {
            .page { padding-top: 50px; }
            .cat-grid { grid-template-columns: repeat(4, 1fr); }
        }
    </style>
</head>
<body data-theme="light">

    <main id="main-content">
        
        <section id="page-settings" class="page">
            <h2>âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ø­Ø³Ø§Ø¨</h2>
            <div id="login-section" class="card">
                <p>Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ø­ÙØ¸ Ø£Ø¹Ù…Ø§Ù„Ùƒ ÙˆÙ…Ø´Ø§Ø±ÙƒØªÙ‡Ø§ Ù…Ø¹ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†.</p>
                <button class="btn-action" onclick="handleLogin()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨ÙˆØ§Ø³Ø·Ø© Google</button>
            </div>

            <div id="profile-section" class="card hidden profile-section">
                <input type="file" id="file-avatar" class="hidden" onchange="previewAvatar(this)">
                <img id="user-img" src="https://via.placeholder.com/100" class="avatar-lg" onclick="document.getElementById('file-avatar').click()">
                <h3 id="display-name">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h3>
                
                <input type="text" id="input-new-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø¬Ø¯ÙŠØ¯">
                <button onclick="saveNewName()" style="background: var(--secondary); color: white; border: none; padding: 10px; border-radius: 5px; width: 100%;">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø§Ø³Ù…</button>
                <p id="name-timer" style="font-size: 12px; color: var(--danger); margin-top: 5px;"></p>
                
                <hr style="margin: 20px 0;">
                <button class="btn-action" onclick="toggleTheme()" style="background: var(--dark); margin-bottom: 10px;">ğŸŒ“ ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ</button>
                <button class="btn-action" onclick="handleLogout()" style="background: var(--danger);">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
            </div>
            
            <div class="card">
                <h4>Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙŠ</h4>
                <p>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø©: <span id="work-count">0</span></p>
                <p>Ø§Ù„Ù…Ø³ÙˆØ¯Ø§Øª: 0</p>
            </div>
        </section>

        <section id="page-categories" class="page">
            <h2>ğŸ“ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</h2>
            <div class="cat-grid">
                <div class="cat-card">ğŸ± Ù…Ø§Ù†Ø¬Ø§</div>
                <div class="cat-card">ğŸ“œ Ù‚ØµØµ Ù‚ØµÙŠØ±Ø©</div>
                <div class="cat-card">ğŸ“š ÙƒØªØ¨ Ø¹Ù„Ù…ÙŠØ©</div>
                <div class="cat-card">ğŸ–‹ï¸ Ø±ÙˆØ§ÙŠØ§Øª</div>
                <div class="cat-card">ğŸ¨ ÙÙ†ÙˆÙ† Ø±Ù‚Ù…ÙŠØ©</div>
                <div class="cat-card">ğŸ“– Ù…Ø¬Ù„Ø§Øª</div>
            </div>
        </section>

        <section id="page-add" class="page">
            <h2>â• Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù…Ù„ Ø¬Ø¯ÙŠØ¯</h2>
            <div class="card">
                <select id="creation-mode" onchange="adjustUI()">
                    <option value="new">Ø¹Ù…Ù„ Ø¬Ø¯ÙŠØ¯ ÙƒÙ„ÙŠØ§Ù‹</option>
                    <option value="part">ÙØµÙ„ / Ø¬Ø²Ø¡ Ø¬Ø¯ÙŠØ¯</option>
                </select>
                <input type="text" id="work-title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ù…Ù„">
                
                <div id="extra-fields">
                    <label>ØºÙ„Ø§Ù Ø§Ù„Ø¹Ù…Ù„:</label>
                    <input type="file" accept="image/*" onchange="handleImport(event)">
                </div>

                <hr style="margin: 15px 0;">

                <div class="toolbar">
                    <input type="color" id="tool-color" value="#000000">
                    <div class="tool active" onclick="setTool('pen', this)">ğŸ–‹ï¸ Ù‚Ù„Ù…</div>
                    <div class="tool" onclick="setTool('text', this)">âŒ¨ï¸ Ù†Øµ</div>
                    <div class="tool" onclick="setTool('rect', this)">â¬œ Ù…Ø±Ø¨Ø¹</div>
                    <div class="tool" onclick="setTool('circle', this)">â­• Ø¯Ø§Ø¦Ø±Ø©</div>
                    <div class="tool" onclick="document.getElementById('import-asset').click()">ğŸ“ Ø§Ø³ØªÙŠØ±Ø§Ø¯ ØµÙˆØ±Ø©</div>
                    <input type="file" id="import-asset" class="hidden" accept="image/*" onchange="handleImport(event)">
                    <div class="tool" style="background: #ffcccc;" onclick="clearCanvas()">ğŸ—‘ï¸ Ù…Ø³Ø­</div>
                </div>

                <div class="editor-container" id="editor-wrapper">
                    <div id="text-overlay">
                        <input type="text" id="active-text-input" placeholder="Ø§ÙƒØªØ¨ Ù‡Ù†Ø§...">
                    </div>
                    <canvas id="main-canvas"></canvas>
                </div>

                <div class="page-ctrl">
                    <div class="page-btn" onclick="changePage(-1)">â—€ï¸ Ø§Ù„Ø³Ø§Ø¨Ù‚</div>
                    <span>ØµÙØ­Ø© <span id="cur-p">1</span> Ù…Ù† <span id="total-p">1</span></span>
                    <div class="page-btn" onclick="changePage(1)">Ø§Ù„ØªØ§Ù„ÙŠ â–¶ï¸</div>
                    <div class="page-btn" style="background: var(--primary);" onclick="addBlankPage()">+ ØµÙØ­Ø©</div>
                </div>

                <div style="margin-top: 20px; display: flex; gap: 10px;">
                    <button class="btn-action" style="background: #f39c12;" onclick="saveDraft()">Ø­ÙØ¸ ÙƒÙ…Ø³ÙˆØ¯Ø©</button>
                    <button class="btn-action" style="background: var(--secondary);" onclick="publishFinal()">Ù†Ø´Ø± Ø§Ù„Ø¹Ù…Ù„ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†</button>
                </div>
            </div>
        </section>

        <section id="page-recent" class="page">
            <h2>ğŸ•’ Ø¢Ø®Ø± Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†</h2>
            <div id="global-list">
                <div class="card">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø¹Ù…Ø§Ù„ Ù…Ù†Ø´ÙˆØ±Ø© Ø­Ø§Ù„ÙŠØ§Ù‹ ÙÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ±.</div>
            </div>
        </section>

        <section id="page-home" class="page active">
            <h2>ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>
            <div class="card">
                <h4>Ø´ÙˆÙ‡Ø¯ Ù…Ø¤Ø®Ø±Ø§Ù‹</h4>
                <div id="history-list" style="display: flex; gap: 10px; overflow-x: auto; padding: 10px;">
                    <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª.</p>
                </div>
            </div>
            <div class="card">
                <h4>Ù…Ù‚ØªØ±Ø­ Ù„Ùƒ</h4>
                <div id="suggest-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <div style="height: 150px; background: #eee; border-radius: 10px;"></div>
                    <div style="height: 150px; background: #eee; border-radius: 10px;"></div>
                </div>
            </div>
        </section>

    </main>

    <nav class="bottom-nav">
        <div class="nav-item" onclick="switchTab('page-settings', this)">
            <i>âš™ï¸</i>
            <span>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</span>
        </div>
        <div class="nav-item" onclick="switchTab('page-categories', this)">
            <i>ğŸ“</i>
            <span>Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</span>
        </div>
        <div class="nav-item plus-btn-container" onclick="switchTab('page-add', this)">
            <div class="plus-btn">+</div>
        </div>
        <div class="nav-item" onclick="switchTab('page-recent', this)">
            <i>ğŸ•’</i>
            <span>Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</span>
        </div>
        <div class="nav-item active" onclick="switchTab('page-home', this)">
            <i>ğŸ </i>
            <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
        </div>
    </nav>

    <script>
        // --- Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø© ---
        let currentUser = JSON.parse(localStorage.getItem('hider_user')) || null;
        let pages = [null]; 
        let currentPageIdx = 0;
        let activeTool = 'pen';
        let isDrawing = false;
        let lastX = 0; let lastY = 0;
        
        const canvas = document.getElementById('main-canvas');
        const ctx = canvas.getContext('2d');
        const textOverlay = document.getElementById('text-overlay');
        const textInput = document.getElementById('active-text-input');

        // --- Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ ---
        function handleLogin() {
            const email = prompt("Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù„ØªØ³Ø¬ÙŠÙ„:");
            if(!email) return;
            currentUser = {
                email: email,
                name: email.split('@')[0],
                avatar: 'https://via.placeholder.com/100',
                lastUpdate: 0,
                id: Date.now()
            };
            localStorage.setItem('hider_user', JSON.stringify(currentUser));
            location.reload();
        }

        function checkAuth() {
            if(currentUser) {
                document.getElementById('login-section').classList.add('hidden');
                document.getElementById('profile-section').classList.remove('hidden');
                document.getElementById('display-name').innerText = currentUser.name;
                document.getElementById('user-img').src = currentUser.avatar;
            }
        }

        function saveNewName() {
            const newName = document.getElementById('input-new-name').value;
            const now = Date.now();
            if(now - currentUser.lastUpdate < 172800000) { // 48 Ø³Ø§Ø¹Ø©
                document.getElementById('name-timer').innerText = "ÙŠØ¬Ø¨ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± 48 Ø³Ø§Ø¹Ø© Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ø§Ø³Ù… Ù…Ø¬Ø¯Ø¯Ø§Ù‹.";
                return;
            }
            currentUser.name = newName;
            currentUser.lastUpdate = now;
            localStorage.setItem('hider_user', JSON.stringify(currentUser));
            alert("ØªÙ… Ø§Ù„ØªØºÙŠÙŠØ±!");
            location.reload();
        }

        // --- Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ†Ù‚Ù„ (Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø£Ø²Ø±Ø§Ø±) ---
        function switchTab(pageId, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            el.classList.add('active');

            if(pageId === 'page-add') {
                initCanvas();
            }
        }

        // --- Ù…Ø­Ø±Ùƒ Ø§Ù„Ù…Ø­Ø±Ø± (Ø§Ù„Ø±Ø³Ù… ÙˆØ§Ù„Ù†Øµ Ø§Ù„Ù…Ø·ÙˆØ±) ---
        function initCanvas() {
            const container = document.getElementById('editor-wrapper');
            canvas.width = container.clientWidth;
            canvas.height = 500;
            loadPageData();

            // Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø§ÙˆØ³
            canvas.onmousedown = startDrawing;
            canvas.onmousemove = draw;
            canvas.onmouseup = stopDrawing;

            // Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù„Ù…Ø³
            canvas.ontouchstart = (e) => startDrawing(e.touches[0]);
            canvas.ontouchmove = (e) => { draw(e.touches[0]); e.preventDefault(); };
            canvas.ontouchend = stopDrawing;

            // ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù†Øµ
            makeDraggable(textOverlay);
        }

        function setTool(tool, el) {
            activeTool = tool;
            document.querySelectorAll('.tool').forEach(t => t.classList.remove('active'));
            el.classList.add('active');

            if(tool === 'text') {
                textOverlay.style.display = 'block';
            } else {
                applyTextToCanvas(); // ØªØ«Ø¨ÙŠØª Ø§Ù„Ù†Øµ Ø§Ù„Ù‚Ø¯ÙŠÙ… Ù‚Ø¨Ù„ ØªØºÙŠÙŠØ± Ø§Ù„Ø£Ø¯Ø§Ø©
            }
        }

        function startDrawing(e) {
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            [lastX, lastY] = [e.clientX - rect.left, e.clientY - rect.top];
        }

        function draw(e) {
            if(!isDrawing || activeTool !== 'pen') return;
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(x, y);
            ctx.strokeStyle = document.getElementById('tool-color').value;
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.stroke();
            [lastX, lastY] = [x, y];
        }

        function stopDrawing() {
            isDrawing = false;
            savePageData();
        }

        // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Øµ Ù…Ù† Ø§Ù„Ù…Ø¯Ø®Ù„ Ø¥Ù„Ù‰ Ø§Ù„ÙƒØ§Ù†ÙØ§Ø³ Ù„ØªØ«Ø¨ÙŠØªÙ‡
        function applyTextToCanvas() {
            if(textOverlay.style.display === 'block' && textInput.value !== "") {
                const rect = canvas.getBoundingClientRect();
                const overRect = textOverlay.getBoundingClientRect();
                
                ctx.font = "bold 20px Arial";
                ctx.fillStyle = document.getElementById('tool-color').value;
                ctx.fillText(textInput.value, overRect.left - rect.left + 10, overRect.top - rect.top + 30);
                
                textInput.value = "";
                textOverlay.style.display = 'none';
                savePageData();
            }
        }

        // --- Ù†Ø¸Ø§Ù… Ø§Ù„ØµÙØ­Ø§Øª ---
        function savePageData() {
            pages[currentPageIdx] = canvas.toDataURL();
        }

        function loadPageData() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            if(pages[currentPageIdx]) {
                const img = new Image();
                img.src = pages[currentPageIdx];
                img.onload = () => ctx.drawImage(img, 0, 0);
            }
            document.getElementById('cur-p').innerText = currentPageIdx + 1;
            document.getElementById('total-p').innerText = pages.length;
        }

        function addBlankPage() {
            savePageData();
            pages.push(null);
            currentPageIdx = pages.length - 1;
            loadPageData();
        }

        function changePage(dir) {
            savePageData();
            const next = currentPageIdx + dir;
            if(next >= 0 && next < pages.length) {
                currentPageIdx = next;
                loadPageData();
            }
        }

        // --- Ø£Ø¯ÙˆØ§Øª Ø¥Ø¶Ø§ÙÙŠØ© ---
        function clearCanvas() {
            if(confirm("Ù…Ø³Ø­ Ø§Ù„ØµÙØ­Ø©ØŸ")) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                savePageData();
            }
        }

        function handleImport(e) {
            const reader = new FileReader();
            reader.onload = function(event) {
                const img = new Image();
                img.onload = function() {
                    const ratio = Math.min(canvas.width / img.width, canvas.height / img.height);
                    ctx.drawImage(img, 0, 0, img.width * ratio, img.height * ratio);
                    savePageData();
                }
                img.src = event.target.result;
            }
            reader.readAsDataURL(e.target.files[0]);
        }

        function makeDraggable(el) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            el.onmousedown = dragMouseDown;

            function dragMouseDown(e) {
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }

            function elementDrag(e) {
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                el.style.top = (el.offsetTop - pos2) + "px";
                el.style.left = (el.offsetLeft - pos1) + "px";
            }

            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }

        function toggleTheme() {
            const body = document.body;
            const theme = body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            body.setAttribute('data-theme', theme);
        }

        function handleLogout() {
            localStorage.removeItem('hider_user');
            location.reload();
        }

        window.onload = checkAuth;

    </script>
</body>
</html>
