<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø©</title>
    <style>
        :root { --p: #3498db; --bg: #f4f7f6; --c: #fff; --t: #333; }
        [data-theme="dark"] { --bg: #1a1a1a; --c: #2c2c2c; --t: #f0f0f0; }
        body { font-family: sans-serif; margin: 0; background: var(--bg); color: var(--t); direction: rtl; transition: 0.3s; }
        
        .page { display: none; padding: 20px; padding-bottom: 90px; max-width: 600px; margin: 0 auto; }
        .page.active { display: block; }
        
        .card { background: var(--c); padding: 15px; border-radius: 12px; margin-bottom: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        input, select, button { width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; border: 1px solid #ddd; font-size: 16px; }
        button { background: var(--p); color: white; border: none; cursor: pointer; font-weight: bold; }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; height: 70px; background: var(--c); display: flex; justify-content: space-around; align-items: center; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); }
        .nav-item { cursor: pointer; text-align: center; flex: 1; color: #888; font-size: 12px; transition: 0.3s; }
        .nav-item.active { color: var(--p); }
        .plus-btn { background: var(--p); color: white !important; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 30px; margin-top: -30px; border: 4px solid var(--bg); }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø±Ø³Ù… */
        #drawingCanvas { background: #fff; border: 2px dashed #3498db; width: 100%; height: 250px; touch-action: none; border-radius: 10px; }
        .preview-img { width: 100%; max-height: 200px; object-fit: cover; border-radius: 10px; margin-top: 10px; display: none; border: 2px solid var(--p); }
        .work-item { border-right: 5px solid var(--p); padding: 10px; background: var(--c); margin-bottom: 10px; border-radius: 5px; }
    </style>
</head>
<body data-theme="light">

    <main>
        <section id="home" class="page active">
            <h2>ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>
            <div id="homeList">Ù„Ù… ØªØ´Ø§Ù‡Ø¯ Ø£ÙŠ Ø´ÙŠØ¡ Ø¨Ø¹Ø¯. Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©!</div>
        </section>

        <section id="recent" class="page">
            <h2>ğŸ•’ Ø¢Ø®Ø± Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø©</h2>
            <div id="globalWorks">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø¹Ù…Ø§Ù„ Ù…Ù†Ø´ÙˆØ±Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.</div>
        </section>

        <section id="add" class="page">
            <h2>â• Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù…Ù„ Ø¬Ø¯ÙŠØ¯</h2>
            <div class="card">
                <select id="workType" onchange="toggleAddMode()">
                    <option value="new">Ø¹Ù…Ù„ Ø¬Ø¯ÙŠØ¯ ÙƒÙ„ÙŠØ§Ù‹</option>
                    <option value="part">ÙØµÙ„ / Ø¬Ø²Ø¡ Ø¬Ø¯ÙŠØ¯</option>
                </select>
                
                <input type="text" id="workTitle" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…Ù„ (Ù…Ø«Ù„Ø§Ù‹: Ù…Ø§Ù†Ø¬Ø§ Ø§Ù„ØµÙ‚Ø±)">
                
                <p>ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù:</p>
                <input type="file" id="imageInput" accept="image/*" onchange="previewImage(event)">
                <img id="imagePreview" class="preview-img">

                <p>Ø£Ø¯Ø§Ø© Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ (Ø§Ø±Ø³Ù… Ø´Ø®ØµÙŠØªÙƒ Ø£Ùˆ Ø§ÙƒØªØ¨):</p>
                <div style="display:flex; gap:5px;">
                    <input type="color" id="penColor" value="#3498db" style="width:50px; padding:0;">
                    <button onclick="clearCanvas()" style="background:#e74c3c">Ù…Ø³Ø­</button>
                </div>
                <canvas id="drawingCanvas"></canvas>
                
                <button onclick="saveWork()" style="background:#2ecc71; margin-top:15px;">Ù†Ø´Ø± Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¢Ù† ğŸš€</button>
            </div>
        </section>

        <section id="categories" class="page">
            <h2>ğŸ“ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</h2>
            <div class="grid">
                <div class="card">ğŸ“š ÙƒØªØ¨ Ø¹Ù„Ù…ÙŠØ©</div>
                <div class="card">ğŸ¨ Ù…Ø§Ù†Ø¬Ø§ ÙˆÙ‚ØµØµ Ù…ØµÙˆØ±Ø©</div>
                <div class="card">ğŸ“œ Ø±ÙˆØ§ÙŠØ§Øª</div>
            </div>
        </section>

        <section id="settings" class="page">
            <h2>âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>
            <div class="card">
                <button onclick="toggleTheme()">ğŸŒ“ ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¸Ù‡Ø± (Ù„ÙŠÙ„ÙŠ/Ù†Ù‡Ø§Ø±ÙŠ)</button>
            </div>
            <div class="card">
                <input type="email" id="loginEmail" placeholder="hiderking364@gmail.com">
                <button onclick="checkAdmin()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
                <p id="adminStatus" style="display:none; color:gold; font-weight:bold;">â­ Ø£Ù†Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ø¢Ù†</p>
            </div>
            <div class="card">
                <p>Ø§Ø³Ù… Ø§Ù„Ø¹Ø±Ø¶:</p>
                <input type="text" id="nickName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ">
                <button onclick="saveName()" style="background:#95a5a6">Ø­ÙØ¸ Ø§Ù„Ø§Ø³Ù…</button>
                <p id="nameNotice" style="color:red; font-size:12px;"></p>
            </div>
        </section>

        <section id="ads" class="page">
            <h2>ğŸ’° Ø¥Ø¹Ù„Ø§Ù†Ø§ØªÙŠ</h2>
            <iframe src="https://www.effectivegatecpm.com/hz0rpumtw?key=92a31feb784de0b2a5e0e9dd9b3132b8" style="width:100%; height:500px; border:none;"></iframe>
        </section>
    </main>

    <nav class="bottom-nav">
        <div class="nav-item" onclick="go('settings', this)">âš™ï¸<br>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div>
        <div class="nav-item" onclick="go('categories', this)">ğŸ“<br>Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</div>
        <div class="nav-item" onclick="go('add', this)"><div class="plus-btn">+</div></div>
        <div id="adBtn" class="nav-item" style="display:none" onclick="go('ads', this)">ğŸ’°<br>Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</div>
        <div class="nav-item" onclick="go('recent', this)">ğŸ•’<br>Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</div>
        <div class="nav-item active" onclick="go('home', this)">ğŸ <br>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
    </nav>

    <script>
        // --- 1. Ø§Ù„ØªÙ†Ù‚Ù„ ÙˆØ§Ù„ØªØ´ØºÙŠÙ„ ---
        function go(id, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            el.classList.add('active');
            if(id === 'add') setupCanvas();
        }

        // --- 2. Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØµÙˆØ±Ø© ÙÙˆØ± Ø§Ø®ØªÙŠØ§Ø±Ù‡Ø§ ---
        function previewImage(event) {
            const reader = new FileReader();
            reader.onload = function() {
                const output = document.getElementById('imagePreview');
                output.src = reader.result;
                output.style.display = "block";
            };
            reader.readAsDataURL(event.target.files[0]);
        }

        // --- 3. Ø£Ø¯Ø§Ø© Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© ---
        let canvas, ctx, drawing = false;
        function setupCanvas() {
            canvas = document.getElementById('drawingCanvas');
            ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = 250;
            
            const start = (e) => { drawing = true; draw(e); };
            const stop = () => { drawing = false; ctx.beginPath(); };
            
            canvas.onmousedown = start; canvas.onmousemove = draw; canvas.onmouseup = stop;
            canvas.ontouchstart = (e) => start(e.touches[0]);
            canvas.ontouchmove = (e) => { draw(e.touches[0]); e.preventDefault(); };
            canvas.ontouchend = stop;
        }

        function draw(e) {
            if (!drawing) return;
            const rect = canvas.getBoundingClientRect();
            ctx.lineWidth = 3; ctx.lineCap = "round";
            ctx.strokeStyle = document.getElementById('penColor').value;
            ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
            ctx.stroke();
        }

        function clearCanvas() { ctx.clearRect(0, 0, canvas.width, canvas.height); }

        // --- 4. Ø­ÙØ¸ ÙˆÙ†Ø´Ø± Ø§Ù„Ø¹Ù…Ù„ (Ù„ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹) ---
        function saveWork() {
            const title = document.getElementById('workTitle').value;
            const img = document.getElementById('imagePreview').src;
            if(!title) return alert("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù… Ø§Ù„Ø¹Ù…Ù„");

            const workHTML = `
                <div class="work-item card">
                    <img src="${img}" style="width:50px; height:50px; float:right; margin-left:10px; border-radius:5px;">
                    <strong>${title}</strong><br>
                    <small>ØªÙ… Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ø¢Ù† Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</small>
                </div>`;
            
            document.getElementById('globalWorks').innerHTML = workHTML + document.getElementById('globalWorks').innerHTML;
            document.getElementById('homeList').innerHTML = workHTML + document.getElementById('homeList').innerHTML;
            
            alert("ØªÙ… Ù†Ø´Ø± Ø¹Ù…Ù„Ùƒ Ø¨Ù†Ø¬Ø§Ø­! Ø§Ø°Ù‡Ø¨ Ù„ØµÙØ­Ø© 'Ø§Ù„Ø£Ø¹Ù…Ø§Ù„' Ø£Ùˆ 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©' Ù„ØªØ±Ø§Ù‡.");
            go('recent', document.querySelectorAll('.nav-item')[4]);
        }

        // --- 5. Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ hiderking364 ---
        function checkAdmin() {
            const mail = document.getElementById('loginEmail').value;
            if(mail === "hiderking364@gmail.com") {
                document.getElementById('adBtn').style.display = 'flex';
                document.getElementById('adminStatus').style.display = 'block';
                alert("Ù…Ø±Ø­Ø¨Ø§Ù‹ hiderking! ØªÙ… ØªÙØ¹ÙŠÙ„ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª.");
            }
        }

        // --- 6. Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ ÙˆØªØºÙŠÙŠØ± Ø§Ù„Ø§Ø³Ù… ---
        function toggleTheme() {
            document.body.setAttribute('data-theme', document.body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark');
        }

        function saveName() {
            const last = localStorage.getItem('lastN');
            if(last && (new Date().getTime() - last < 172800000)) {
                document.getElementById('nameNotice').innerText = "Ø§Ù†ØªØ¸Ø± ÙŠÙˆÙ…ÙŠÙ† Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ø§Ø³Ù… Ù…Ø¬Ø¯Ø¯Ø§Ù‹!";
            } else {
                localStorage.setItem('lastN', new Date().getTime());
                alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø§Ø³Ù… Ø¨Ù†Ø¬Ø§Ø­!");
            }
        }
    </script>
</body>
</html>
