<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© hiderking Ù„Ù„Ø¥Ø¨Ø¯Ø§Ø¹</title>
    <style>
        /* --- Ø§Ù„ØªØµÙ…ÙŠÙ… CSS --- */
        :root { --p: #3498db; --bg: #f4f7f6; --c: #fff; --t: #333; }
        [data-theme="dark"] { --bg: #1a1a1a; --c: #2c2c2c; --t: #f0f0f0; }
        
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--bg); color: var(--t); direction: rtl; transition: 0.3s; }
        
        .page { display: none; padding: 20px; padding-bottom: 100px; max-width: 800px; margin: 0 auto; }
        .page.active { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .card { background: var(--c); padding: 20px; border-radius: 15px; margin-bottom: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); position: relative; }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; height: 75px; background: var(--c); display: flex; justify-content: space-around; align-items: center; box-shadow: 0 -2px 15px rgba(0,0,0,0.1); z-index: 1000; }
        .nav-item { cursor: pointer; text-align: center; flex: 1; color: #888; font-size: 12px; transition: 0.3s; }
        .nav-item.active { color: var(--p); font-weight: bold; }
        .plus-btn { background: var(--p); color: white !important; width: 55px; height: 55px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 35px; margin-top: -35px; border: 5px solid var(--bg); box-shadow: 0 4px 10px rgba(52,152,219,0.3); }

        /* Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø±Ø³Ù… */
        canvas { background: #fff; border: 2px solid #ddd; width: 100%; height: 350px; border-radius: 10px; cursor: crosshair; touch-action: none; }
        .tools { display: flex; gap: 10px; margin-bottom: 10px; flex-wrap: wrap; }
        
        /* Ø§Ù„Ù‚Ø§Ø±Ø¦ ÙˆØ£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */
        input, select, button { width: 100%; padding: 12px; margin: 8px 0; border-radius: 10px; border: 1px solid #ddd; outline: none; }
        .btn-post { background: var(--p); color: white; border: none; font-weight: bold; cursor: pointer; }
        .btn-delete { background: #e74c3c; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; width: auto; font-size: 12px; margin-top: 10px; }
        
        .work-preview { display: flex; align-items: center; gap: 15px; }
        .work-preview img { width: 70px; height: 70px; border-radius: 10px; object-fit: cover; }
        
        #readerContent img { width: 100%; border-radius: 10px; }
    </style>
</head>
<body data-theme="light">

    <main>
        <section id="home" class="page active">
            <h2>ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>
            <div id="homeList">Ù„Ù… ØªÙ‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙŠ Ø¹Ù…Ù„ Ø¨Ø¹Ø¯..</div>
        </section>

        <section id="recent" class="page">
            <h2>ğŸ•’ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø©</h2>
            <div id="recentList">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø­ØªÙˆÙ‰.</div>
        </section>

        <section id="add" class="page">
            <h2>â• Ø¥Ù†Ø´Ø§Ø¡ Ù‚ØµØ©/ÙƒØªØ§Ø¨ Ø¬Ø¯ÙŠØ¯</h2>
            <div class="card">
                <input type="text" id="workTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ù…Ù„...">
                <label>ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù:</label>
                <input type="file" id="coverFile" accept="image/*">
                
                <div class="tools">
                    <input type="color" id="colorPicker" value="#3498db" style="width:50px; height:40px; padding:2px;">
                    <button onclick="clearCanvas()" style="width:auto; background:#95a5a6; color:white;">Ù…Ø³Ø­ Ø§Ù„Ù„ÙˆØ­Ø©</button>
                    <button onclick="setTool('pen')" style="width:auto;">Ù‚Ù„Ù…</button>
                </div>
                <canvas id="mainCanvas"></canvas>
                <button class="btn-post" onclick="publishWork()">Ù†Ø´Ø± Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¢Ù† ğŸš€</button>
            </div>
        </section>

        <section id="categories" class="page">
            <h2>ğŸ“ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</h2>
            <div class="card">ğŸ“š ÙƒØªØ¨ ÙˆØ±ÙˆØ§ÙŠØ§Øª</div>
            <div class="card">ğŸ¨ Ù…Ø§Ù†Ø¬Ø§ ÙˆÙ‚ØµØµ Ù…ØµÙˆØ±Ø©</div>
        </section>

        <section id="settings" class="page">
            <h2>âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>
            <div class="card">
                <button onclick="toggleTheme()">ğŸŒ“ ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¸Ù‡Ø± (Ù„ÙŠÙ„ÙŠ/Ù†Ù‡Ø§Ø±)</button>
            </div>
            <div class="card">
                <input type="email" id="adminEmail" placeholder="hiderking364@gmail.com">
                <button onclick="adminLogin()">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</button>
            </div>
        </section>

        <section id="reader" class="page">
            <button onclick="showPage('home')" style="width:auto; background:#95a5a6; color:white;">ğŸ”™ Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
            <h2 id="readerTitle">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</h2>
            <div id="readerContent" class="card"></div>
        </section>

        <section id="ads" class="page">
            <h2>ğŸ’° Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ</h2>
            <iframe id="adFrame" style="width:100%; height:500px; border:none;"></iframe>
        </section>
    </main>

    <nav class="bottom-nav">
        <div class="nav-item" onclick="showPage('settings', this)">âš™ï¸<br>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div>
        <div class="nav-item" onclick="showPage('categories', this)">ğŸ“<br>Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</div>
        <div class="nav-item" onclick="showPage('add', this)"><div class="plus-btn">+</div></div>
        <div id="adBtn" class="nav-item" style="display:none" onclick="openAds(this)">ğŸ’°<br>Ø¥Ø¹Ù„Ø§Ù†Ø§ØªÙŠ</div>
        <div class="nav-item" onclick="showPage('recent', this)">ğŸ•’<br>Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</div>
        <div class="nav-item active" onclick="showPage('home', this)">ğŸ <br>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
    </nav>

    <script>
        // --- Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© JS ---
        let works = JSON.parse(localStorage.getItem('myWorks')) || [];

        // 1. Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ†Ù‚Ù„
        function showPage(id, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if(el) {
                document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
                el.classList.add('active');
            }
            if(id === 'add') initCanvas();
            if(id === 'home' || id === 'recent') renderWorks();
        }

        // 2. Ù†Ø¸Ø§Ù… Ø§Ù„Ø±Ø³Ù… (Canvas)
        let canvas, ctx, drawing = false;
        function initCanvas() {
            canvas = document.getElementById('mainCanvas');
            ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = 350;
            
            canvas.onmousedown = (e) => { drawing = true; draw(e); };
            canvas.onmousemove = draw;
            canvas.onmouseup = () => { drawing = false; ctx.beginPath(); };
            // Ø¯Ø¹Ù… Ø§Ù„Ù„Ù…Ø³
            canvas.ontouchstart = (e) => { drawing = true; draw(e.touches[0]); };
            canvas.ontouchmove = (e) => { draw(e.touches[0]); e.preventDefault(); };
            canvas.ontouchend = () => { drawing = false; ctx.beginPath(); };
        }

        function draw(e) {
            if (!drawing) return;
            const rect = canvas.getBoundingClientRect();
            ctx.lineWidth = 3; ctx.lineCap = "round";
            ctx.strokeStyle = document.getElementById('colorPicker').value;
            ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
            ctx.stroke();
        }

        function clearCanvas() { ctx.clearRect(0, 0, canvas.width, canvas.height); }

        // 3. Ù†Ø´Ø± ÙˆØ­ÙØ¸ Ø§Ù„Ø¹Ù…Ù„
        function publishWork() {
            const title = document.getElementById('workTitle').value;
            if(!title) return alert("Ø¶Ø¹ Ø¹Ù†ÙˆØ§Ù†Ø§Ù‹ Ù„Ù„Ø¹Ù…Ù„ Ø£ÙˆÙ„Ø§Ù‹!");

            const canvasData = canvas.toDataURL(); // Ø­ÙØ¸ Ø§Ù„Ø±Ø³Ù… ÙƒØµÙˆØ±Ø©
            const newWork = {
                id: Date.now(),
                title: title,
                content: canvasData,
                date: new Date().toLocaleDateString()
            };

            works.push(newWork);
            localStorage.setItem('myWorks', JSON.stringify(works));
            alert("ØªÙ… Ù†Ø´Ø± Ø§Ù„Ø¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­!");
            showPage('home');
        }

        // 4. Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ù…Ø¹ Ù…ÙŠØ²Ø© Ø§Ù„Ø­Ø°Ù
        function renderWorks() {
            const list = document.getElementById('homeList');
            const recent = document.getElementById('recentList');
            if(works.length === 0) {
                list.innerHTML = "Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ ÙØ§Ø±ØºØ©.";
                recent.innerHTML = "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø£Ø¹Ù…Ø§Ù„ Ù…Ù†Ø´ÙˆØ±Ø©.";
                return;
            }

            const html = works.map(work => `
                <div class="card">
                    <div class="work-preview" onclick="readWork(${work.id})">
                        <img src="${work.content}">
                        <div>
                            <strong>${work.title}</strong><br>
                            <small>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø´Ø±: ${work.date}</small>
                        </div>
                    </div>
                    <button class="btn-delete" onclick="deleteWork(${work.id})">Ø­Ø°Ù Ø§Ù„Ø¹Ù…Ù„ ğŸ—‘ï¸</button>
                </div>
            `).join('');

            list.innerHTML = html;
            recent.innerHTML = html;
        }

        // 5. Ø­Ø°Ù Ø§Ù„Ø¹Ù…Ù„
        function deleteWork(id) {
            if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…Ù„ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ")) {
                works = works.filter(w => w.id !== id);
                localStorage.setItem('myWorks', JSON.stringify(works));
                renderWorks();
            }
        }

        // 6. ÙØªØ­ Ø§Ù„Ù‚Ø§Ø±Ø¦
        function readWork(id) {
            const work = works.find(w => w.id === id);
            document.getElementById('readerTitle').innerText = work.title;
            document.getElementById('readerContent').innerHTML = `<img src="${work.content}">`;
            showPage('reader');
        }

        // 7. Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ hiderking364
        function adminLogin() {
            const email = document.getElementById('adminEmail').value;
            if(email === "hiderking364@gmail.com") {
                document.getElementById('adBtn').style.display = 'flex';
                alert("Ø£Ù‡Ù„Ø§Ù‹ hiderkingØŒ ØªÙ… ØªÙØ¹ÙŠÙ„ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª.");
            }
        }

        function openAds(el) {
            document.getElementById('adFrame').src = "https://www.effectivegatecpm.com/hz0rpumtw?key=92a31feb784de0b2a5e0e9dd9b3132b8";
            showPage('ads', el);
        }

        function toggleTheme() {
            document.body.setAttribute('data-theme', document.body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark');
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø¡
        renderWorks();
    </script>
</body>
</html>
